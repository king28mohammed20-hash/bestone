<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Best One - {% block title %}حجوزات{% endblock %}</title>
  
  <!-- Bootstrap RTL -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  
  <!-- الخطوط الفاخرة -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  
  <!-- Font Awesome للأيقونات -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- CSS Files
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
   <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}"> 
  <link rel="stylesheet" href="{{ url_for('static', filename='css/luxury-theme.css') }}"> -->
<link rel="stylesheet" href="{{ url_for('static', filename='css/unified-theme.css') }}">
  
  <!-- Meta Tags للـ SEO -->
  <meta name="description" content="Best One - أفضل خدمات السيارات في المملكة">
  <meta name="keywords" content="سيارات, تظليل, نانو سيراميك, حماية">
  <meta name="author" content="Best One">
</head>

<body data-theme="light">
  
  <!-- Navbar بسيط ومضمون الشغل -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <!-- اللوغو مع الشعار في الأعلى -->
        <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url_for('index') }}">
        <img src="{{ url_for('static', filename='logo.png') }}" 
             alt="Best One Logo" 
             style="height: 50px; width: auto; max-width: 100px; object-fit: contain; filter: none;">
        <span class="fw-bold">Best One</span>
      </a> 
      
      <!-- زر القائمة للموبايل -->
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- القائمة -->
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
          <!-- روابط الإدارة المُصلحة -->
          {% if current_user.is_authenticated and current_user.is_admin %}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" 
               href="#" 
               id="adminDropdown" 
               role="button" 
               data-bs-toggle="dropdown" 
               aria-expanded="false"
               style="cursor: pointer;">
              <i class="fas fa-cog me-2"></i>الإدارة
              <!--  <i class="fas fa-chevron-down ms-1" style="font-size: 0.8rem;"></i> -->
            </a>
            <!-- قائمة الإدارة -->
            <ul class="dropdown-menu" aria-labelledby="adminDropdown">
              <li>
                <h6 class="dropdown-header">
                  <i class="fas fa-shield-alt me-2"></i>لوحة الإدارة
                </h6>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="{{ url_for('admin_home') }}">
                  <i class="fas fa-tachometer-alt me-2 text-primary"></i>لوحة التحكم
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{{ url_for('admin_users') }}">
                  <i class="fas fa-users me-2 text-success"></i>المستخدمين
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{{ url_for('admin_services') }}">
                  <i class="fas fa-concierge-bell me-2 text-info"></i>الخدمات
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{{ url_for('admin_offers') }}">
                  <i class="fas fa-tags me-2 text-warning"></i>العروض
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{{ url_for('admin_videos') }}">
                  <i class="fas fa-video me-2 text-danger"></i>الفيديوهات
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="{{ url_for('admin_contact') }}">
                  <i class="fas fa-address-book me-2 text-secondary"></i>بيانات التواصل
                </a>
              </li>
            </ul>
          </li>
          {% endif %}

          <!-- الروابط العامة -->
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('videos_page') }}">
              <i class="fas fa-play-circle me-2"></i>فيديوهاتنا
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{{ url_for('contact_page') }}">
              <i class="fas fa-map-marker-alt me-2"></i>تواصل معنا
            </a>
          </li>
        </ul>

        <!-- روابط المستخدم -->
        <ul class="navbar-nav">
          {% if current_user.is_authenticated %}
          <!-- قائمة المستخدم المُصلحة -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle d-flex align-items-center" 
               href="#" 
               id="userDropdown" 
               role="button" 
               data-bs-toggle="dropdown" 
               aria-expanded="false"
               style="cursor: pointer;">
              <div class="bg-primary rounded-circle d-flex align-items-center justify-content-center me-2" 
                   style="width: 35px; height: 35px;">
                <i class="fas fa-user text-white" style="font-size: 0.9rem;"></i>
              </div>
              <span class="d-none d-md-inline">{{ current_user.full_name }}</span>
             <!-- <i class="fas fa-chevron-down ms-1" style="font-size: 0.8rem;"></i> -->
            </a>
            <!-- القائمة المنسدلة -->
            <ul class="dropdown-menu dropdown-menu-start" aria-labelledby="userDropdown">
              <li>
                <h6 class="dropdown-header">
                  <i class="fas fa-user me-2"></i>{{ current_user.full_name }}
                </h6>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item" href="{{ url_for('my_bookings') }}">
                  <i class="fas fa-calendar-check me-2 text-primary"></i>حجوزاتي
                </a>
              </li>
              <li>
                <a class="dropdown-item" href="{{ url_for('change_password') }}">
                  <i class="fas fa-key me-2 text-warning"></i>تغيير كلمة المرور
                </a>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li>
                <a class="dropdown-item text-danger" href="{{ url_for('logout') }}">
                  <i class="fas fa-sign-out-alt me-2"></i>تسجيل الخروج
                </a>
              </li>
            </ul>
          </li>
          {% else %}
          <!-- روابط غير المسجلين -->
          <li class="nav-item">
            <a class="nav-link btn btn-outline-light me-2 px-3" href="{{ url_for('login') }}">
              <i class="fas fa-sign-in-alt me-2"></i>دخول
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link btn btn-primary px-3" href="{{ url_for('register') }}">
              <i class="fas fa-user-plus me-2"></i>تسجيل
            </a>
          </li>
          {% endif %}
        </ul>
      </div>
    </div>
  </nav>

  <!-- المحتوى الرئيسي -->
  <main class="main-content" style="margin-top: 80px; min-height: calc(100vh - 160px); padding: 2rem 0;">
    <div class="container">
      <!-- عرض الرسائل -->
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="row justify-content-center mb-4">
            <div class="col-md-8">
              {% for category, message in messages %}
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                  <div class="d-flex align-items-center">
                    <div class="me-3">
                      {% if category == 'success' %}
                        <i class="fas fa-check-circle fs-5 text-success"></i>
                      {% elif category == 'danger' %}
                        <i class="fas fa-exclamation-triangle fs-5 text-danger"></i>
                      {% elif category == 'warning' %}
                        <i class="fas fa-exclamation-circle fs-5 text-warning"></i>
                      {% else %}
                        <i class="fas fa-info-circle fs-5 text-info"></i>
                      {% endif %}
                    </div>
                    <div class="flex-grow-1">{{ message }}</div>
                  </div>
                  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
              {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endwith %}

      <!-- محتوى الصفحة -->
      {% block content %}{% endblock %}
    </div>
  </main>

  <!-- Footer بسيط -->
  <footer class="bg-dark text-white text-center py-4 mt-5">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 text-center text-md-start">
          <div class="d-flex align-items-center justify-content-center justify-content-md-start">
            <img src="{{ url_for('static', filename='logo.png') }}" alt="Best One" style="height: 30px; width: auto;" class="me-2">
            <span class="fw-bold">Best One © 2025</span>
          </div>
        </div>
        <div class="col-md-6 text-center text-md-end mt-2 mt-md-0">
          <small>الأسعار بالـ {{ CURRENCY_LABEL if CURRENCY_LABEL else 'ريال' }}</small>
        </div>
      </div>
    </div>
  </footer>

  <!-- أيقونات السوشيال ميديا العائمة -->
  <div class="social-float-container">
    {% if contact_global %}
      <!-- واتساب -->
      {% if contact_global.whatsapp %}
      <a class="social-float whatsapp" 
         href="https://wa.me/{{ contact_global.whatsapp | replace('+','') | replace(' ','') }}"
         target="_blank" rel="noopener" 
         aria-label="WhatsApp" 
         title="تواصل معنا عبر واتساب">
        <i class="fab fa-whatsapp"></i>
      </a>
      {% endif %}
      
      <!-- سناب شات -->
      {% if contact_global.snapchat %}
      <a class="social-float snapchat" 
         href="https://snapchat.com/add/{{ contact_global.snapchat }}"
         target="_blank" rel="noopener" 
         aria-label="Snapchat" 
         title="تابعنا على سناب شات">
        <i class="fab fa-snapchat-ghost"></i>
      </a>
      {% endif %}
      
      <!-- انستغرام -->
      {% if contact_global.instagram %}
      <a class="social-float instagram" 
         href="https://instagram.com/{{ contact_global.instagram }}"
         target="_blank" rel="noopener" 
         aria-label="Instagram" 
         title="تابعنا على انستغرام">
        <i class="fab fa-instagram"></i>
      </a>
      {% endif %}
      
      <!-- تيك توك -->
      {% if contact_global.tiktok %}
      <a class="social-float tiktok" 
         href="https://tiktok.com/@{{ contact_global.tiktok }}"
         target="_blank" rel="noopener" 
         aria-label="TikTok" 
         title="تابعنا على تيك توك">
        <i class="fab fa-tiktok"></i>
      </a>
      {% endif %}
    {% endif %}
  </div>

  <!-- زر العودة للأعلى 
  <button class="btn btn-primary rounded-circle position-fixed" id="scrollToTop" 
          style="bottom: 30px; right: 30px; width: 50px; height: 50px; display: none; z-index: 1030;">
    <i class="fas fa-chevron-up"></i>
  </button>-->

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  
  <script src="{{ url_for('static', filename='js/luxury-theme.js') }}"></script>

  <!-- CSS إضافي مباشر -->
  <style>
    /* تحسينات السوشيال ميديا */
    .social-float-container {
      position: fixed;
      left: 20px;
      bottom: 20px;
      z-index: 1030;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .social-float {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      color: #ffffff;
      font-size: 1.2rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.3s ease;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .social-float:hover {
      transform: translateY(-3px) scale(1.05);
      color: #ffffff;
    }

    /* ألوان السوشيال ميديا */
    .whatsapp {
      background: linear-gradient(135deg, #25D366 0%, #128c7e 100%);
    }

    .snapchat {
      background: linear-gradient(135deg, #FFFC00 0%, #FFD100 100%);
      color: #000000 !important;
    }

    .snapchat:hover {
      color: #000000 !important;
    }

    .instagram {
      background: linear-gradient(135deg, #E4405F 0%, #C13584 50%, #833AB4 100%);
    }

    .tiktok {
      background: linear-gradient(135deg, #000000 0%, #fe2c55 50%, #25f4ee 100%);
    }

    /* تحسينات للجوال */
    @media (max-width: 768px) {
      .social-float-container {
        left: 15px;
        bottom: 15px;
        gap: 8px;
      }
      
      .social-float {
        width: 45px;
        height: 45px;
        font-size: 1.1rem;
      }
    }

    /* تحسين النافبار */
    .navbar-brand {
      transition: transform 0.2s ease;
    }

    .navbar-brand:hover {
      transform: scale(1.05);
    }

    .nav-link {
      transition: all 0.2s ease;
    }

    .nav-link:hover {
      transform: translateY(-1px);
    }

    /* تحسين الدروب داون */
    .dropdown-menu {
      border: none;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      border-radius: 0.5rem;
    }

    .dropdown-item {
      transition: all 0.2s ease;
    }

    .dropdown-item:hover {
      background: var(--bs-primary);
      color: white;
      transform: translateX(5px);
    }
  </style>

  <!-- JavaScript محسن للدروب داون -->
  <script>
    // تأكد من تحميل Bootstrap
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Page loaded');
      
      // التحقق من Bootstrap
      if (typeof bootstrap === 'undefined') {
        console.error('Bootstrap not loaded!');
        return;
      }

      // التعامل مع دروب داون الإدارة
      const adminDropdown = document.getElementById('adminDropdown');
      if (adminDropdown) {
        adminDropdown.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const dropdownMenu = this.nextElementSibling;
          if (dropdownMenu) {
            // إغلاق كل الدروب داون الأخرى
            document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
              if (menu !== dropdownMenu) {
                menu.classList.remove('show');
              }
            });
            
            // تبديل حالة الدروب داون الحالي
            dropdownMenu.classList.toggle('show');
            console.log('Admin dropdown toggled');
          }
        });
      }

      // التعامل مع دروب داون المستخدم
      const userDropdown = document.getElementById('userDropdown');
      if (userDropdown) {
        userDropdown.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          
          const dropdownMenu = this.nextElementSibling;
          if (dropdownMenu) {
            // إغلاق كل الدروب داون الأخرى
            document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
              if (menu !== dropdownMenu) {
                menu.classList.remove('show');
              }
            });
            
            // تبديل حالة الدروب داون الحالي
            dropdownMenu.classList.toggle('show');
            console.log('User dropdown toggled');
          }
        });
      }

      // إغلاق الدروب داون عند النقر خارجه
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.dropdown')) {
          document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
            menu.classList.remove('show');
          });
        }
      });

      // إغلاق الدروب داون عند النقر على رابط
      document.querySelectorAll('.dropdown-item').forEach(item => {
        item.addEventListener('click', function() {
          document.querySelectorAll('.dropdown-menu.show').forEach(menu => {
            menu.classList.remove('show');
          });
        });
      });

      // تجربة Bootstrap Dropdown إذا كان متاح
      try {
        // تفعيل كل الدروب داون بـ Bootstrap
        document.querySelectorAll('[data-bs-toggle="dropdown"]').forEach(function (dropdownToggle) {
          new bootstrap.Dropdown(dropdownToggle);
        });
      } catch (error) {
        console.log('Bootstrap Dropdown fallback activated');
      }
    });

    // زر العودة للأعلى
    window.addEventListener('scroll', function() {
      const scrollTop = document.getElementById('scrollToTop');
      if (window.pageYOffset > 300) {
        scrollTop.style.display = 'block';
      } else {
        scrollTop.style.display = 'none';
      }
    });

    document.getElementById('scrollToTop').addEventListener('click', function() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });

    // التعامل مع التنبيهات
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.alert').forEach(alert => {
        setTimeout(() => {
          if (alert && alert.parentElement) {
            try {
              const bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
              bsAlert.close();
            } catch (error) {
              alert.remove();
            }
          }
        }, 5000);
      });
    });
  </script>

  
  
  
  <!-- زر الوضع الليلي العائم -->
<button class="theme-toggle-floating" 
        onclick="toggleTheme()" 
        title="تبديل الوضع الليلي" 
        aria-label="تبديل الوضع الليلي">
</button>
<script>
// تحسين دالة toggleTheme الموجودة
function toggleTheme() {
  const currentTheme = document.documentElement.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  
  // تأثير انيميشن للزر عند التغيير
  const btn = document.querySelector('.theme-toggle-floating');
  if (btn) {
    btn.style.transform = 'scale(0.8)';
    setTimeout(() => {
      btn.style.transform = '';
    }, 150);
  }
  
  document.documentElement.setAttribute('data-theme', newTheme);
  localStorage.setItem('theme', newTheme);
}

// تطبيق الثيم المحفوظ عند تحميل الصفحة
document.addEventListener('DOMContentLoaded', function() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.documentElement.setAttribute('data-theme', savedTheme);
});
</script>


</body>

</html>








